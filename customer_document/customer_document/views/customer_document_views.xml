<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="customer_document_tree_view" model="ir.ui.view">
		<field name="name">customer.document.tree.view</field>
		<field name="model">customer.document</field>
		<field name="arch" type="xml">
			<tree>
				<field name="name" required="True"/>
				<field name="birth_date"/>
				<field name="age"/>
				<field name="expiry_date"/>
				<field name="customer_id"/>
			</tree>
		</field>
	</record>

	<record id="customer_document_form_view" model="ir.ui.view">
		<field name="name">customer.document.form.view</field>
		<field name="model">customer.document</field>
		<field name="arch" type="xml">
			<form>
				<header>
					<field name="state" widget="statusbar"/>
					<button name="action_approved" string="Approve" type="object" class="btn-primary" attrs="{'invisible':[('state','!=','draft')]}"/>
					<button name="action_refused" string="Refuse" type="object" class="btn-primary"  attrs="{'invisible':[('state','!=','draft')]}"/>
					<button name="action_set_to_draft" string="Set to Draft" type="object" class="btn-primary" attrs="{'invisible':[('state','!=','refused')]}"/>
				</header>
				<sheet>
					<group>
						<group>
							<field name="name" attrs="{'readonly':[('state','in',('approved','refused'))]}" required="True"/>
							<field name="birth_date" attrs="{'readonly':[('state','in',('approved','refused'))]}"/>
							<field name="age"/>							
							<button name="action_calcualte_age" type="object" string="Calculate Age" class="btn-primary" attrs="{'invisible':[('state','in','approved')]}"/>
						</group>
						<group>
							<field name="expiry_date" required="True" attrs="{'readonly':[('state','in',('approved','refused'))]}"/>
							<field name="customer_id" attrs="{'readonly':[('state','in',('approved','refused'))]}" required="True"/>
						</group>
					</group>
						
				</sheet>
			</form>
		</field>
	</record>

	<record id="customer_document_search_view" model="ir.ui.view">
		<field name="name">customer.document.search.view</field>
		<field name="model">customer.document</field>
		<field name="arch" type="xml">
			<search>
				<field name="name"/>
				<field name="age"/>
				<field name="customer_id"/>
				<filter name="filter_customer" string="Age" domain="[]"/>
				<group expand="0" string="Group By">
					<filter name="customer" string="Customer" domain="[]" context="{'group_by':'customer_id'}"/>
					<filter name="age" string="Age" domain="[]" context="{'group_by':'age'}"/>
				</group>
			</search>
		</field>
	</record>

	<record id="action_customer_document" model="ir.actions.act_window" >
		<field name="name">Customer Document</field>
		<field name="res_model">customer.document</field>
		<field name="view_mode">tree,form</field>
	</record>

	<menuitem 
		id="menu_customer_document"
		name="Customer Document" 
		action="action_customer_document"/>
</odoo>
