<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="employee_leave_tree_view" model="ir.ui.view">
		<field name="name">emplyee.leave.tree.view</field>
		<field name="model">employee.leave</field>
		<field name="arch" type="xml">
			<tree>
				<field name="hr_id" decoration-bf="1" widget="many2one_avatar_user"/>
				<field name="employee_id" decoration-success="1"/>
				<field name="leave_type" widget="badge"/>
				<field name="stage" widget="badge" decoration-success="stage == 'approved'"
					decoration-danger="stage == 'rejected'" decoration-primary="stage == 'new'"/>
				<field name="start_date" decoration-warning="1"/>
				<field name="end_date" decoration-warning="1"/>
				<field name="total_leave"/>
				<field name="remaining_leave" optional="hide"/>
			</tree>
		</field>
	</record>

	<record id="employee_leave_form_view" model="ir.ui.view">
		<field name="name">employee.leave.form.view</field>
		<field name="model">employee.leave</field>
		<field name="arch" type="xml">
			<form>
				<header>
					<field name="stage" widget="statusbar"/>
				</header>
				<sheet>
					<widget name="web_ribbon" text="Approved" bg_color="bg-success" attrs="{'invisible':[('stage', '!=', 'approved')]}"/>
					<widget name="web_ribbon" text="New" bg_color="bg-info" attrs="{'invisible':[('stage', '!=', 'new')]}"/>
					<widget name="web_ribbon" text="Rejected" bg_color="bg-danger" attrs="{'invisible':[('stage', '!=', 'rejected')]}"/>
					<group>
						<group>
							<field name="hr_id" widget="many2one_avatar_user"/>
							<field name="employee_id" required="True"/>
							<field name="leave_type" required="True"/>
						</group>
						<group>
							<field name="start_date"/>
							<field name="end_date"/>
							<field name="total_leave"/>
							<field name="remaining_leave"/>
						</group>
						<group>
							<button name="action_approved" string="Approved" class="btn-primary" type="object" invisible="context.get('hide_approved')"/>
 							<button name="action_rejected" string="Rejected" class="btn-primary" type="object" invisible="context.get('hide_rejected')"/>
 							<button name="ranbow_msg" string="Click Button" type="object" class="btn-primary" invisible="context.get('hide_button')"/>
						</group>
					</group>
				</sheet>
				<div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                    <field name="activity_ids" widget="mail_activity"/>
                </div>
			</form>
		</field>
	</record>

	<record id="employee_leave_search_view" model="ir.ui.view">
		<field name="name">employee.leave.search.view</field>
		<field name="model">employee.leave</field>
		<field name="arch" type="xml">
			<search>
				<field name="employee_id"/>
				<field name="leave_type"/>
				<filter name="stage" string="Stage" domain="[('stage','=','new')]"/>
				<group expand="0" string="Group By">
					<filter name="hr_id" string="User" domain="[]" context="{'group_by':'hr_id'}"/>  
				</group>
			</search>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_employee_leave">
        <field name="name">Employee Leave</field>
        <field name="res_model">employee.leave</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'hide_approved':1,'hide_rejected':1,'search_default_stage':1}}</field>
    </record>

    <menuitem
        id="menu_leave_management"
        name="Leave Management"
        action="action_employee_leave"/>

    <menuitem id="menu_employee_leave"
    	name="Employee Leave"
    	parent="menu_leave_management"
    	action="action_employee_leave"/>

   	<record model="ir.actions.act_window" id="action_pending_leave">
        <field name="name">Employee Leave</field>
        <field name="res_model">employee.leave</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('stage','=','new'),('hr_id','in',[uid])]</field>
        <field name="context">{'create':0,'edit':0,'hide_button':1}</field>
    </record>

    <menuitem
    	id="menu_leave_approval"
    	name="Pending Leave Approval"
    	parent="menu_leave_management"
    	action="action_pending_leave"/>

</odoo>